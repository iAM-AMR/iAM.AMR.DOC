

=================
iAM.AMR Framework
=================

--------
Overview
--------

The iAM.AMR models are organized into *stories*, or collections of one or more drug-microbe-commodity combinations that together describe an important facet of resistance in the agri-food production system in Canada.

Each |smod| shares the same architecture, which allows us to:

- share common data and functions via linkable modules (small stand-alone models)
- integrate the models to simultaneously evaluate multiple stories

.. image:: /assets/figures/puzzle_piece.jpg
    :alt: image of jigsaw puzzle pieces.

You can think of models and modules fitting together like puzzle pieces; similar models and modules *'click'* into one another to form a whole.

.. attention:: As a result of this *'pluggable'* framework, the iAM.AMR models are often distributed across multiple files -- ensure you have all the files you need to run your model.



---------------------------
Implementation in Analytica
---------------------------

---------------
iAM.AMR Stories
---------------

Naming Scheme
~~~~~~~~~~~~~

Insert Here.

Story Icons
~~~~~~~~~~~

Insert Here.

Existing Models
~~~~~~~~~~~~~~~

- iAM.AMR.3GC
- iAM.AMR.CHI
- iAM.AMR.FQC



---------------
iAM.AMR Modules
---------------

Naming Scheme
~~~~~~~~~~~~~

Modules are generally saved with a prefix of *iAM.AMR.MOD* in the format *iAM.AMR.MOD_contents_here*.

Model Names
~~~~~~~~~~~
The models are named **iAM.AMR.XZY** where **XYZ** represents a three character short-code identifying the model. The code should be relevant to the contents of the model.

* e.g. the iAM.AMR.CHI model focuses on chickens, while the iAM.AMR.3GC focuses on third-generation cephalosporins.

Factor Identifier
~~~~~~~~~~~~~~~~~
The factor identifier is automatically generated by the :ref:`sawmill R package <data_extraction/Sawmill:The sawmill R Package>`, in the format **A#####_Name_of_Factor** where:

* **A** is either 'R' for a standard factor, or 'M' for a meta-analysis
* **#####** is the factor or meta-analysis number

Where multiple factors inform a single node:

* and one or more of the factors is a meta-analysis, use the meta-analysis identifier with the lowest number
* and all of the factors are not meta-analyses, use the identifier with the lowest number
* and all of the factors are meta-analyses, use the identifier with the lowest number

In some instances, it may be appropriate to deviate from this schema â€“ care should be taken to maintain consistency despite these deviations.

Node Colour
~~~~~~~~~~~
Colour is used to indicate the function and contents of each node. The use of colour in the model should conform to the general scheme:

Light Grey
   Non user-modifiable node that performs intermediate calculations, or which is otherwise exposed to the user via a separate user interface
Dark Grey
   A node containing a list of factors
Orange
   An objective node, containing intermediate or final results of calculations
Purple
   A user interface node
Blue
   A factor node, or a node which contains epidemiological data

Note, the following colour designations are liable to change, as the models are further standardized:

Pink
   A node in which the factor is informed by meta-analysis
Peach
   A node which contains information for multiple bacterial species
Gold
   A node which contains information for multiple bacterial species, informed by meta-analyses


